{"version":3,"file":"4.js","mappings":"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","sources":["webpack://@openmrs/esm-patient-attachments-app/./src/attachments/attachments.resource.tsx","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/image-preview.scss?e117","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/image-preview.component.tsx","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/camera-upload.scss?1b7d","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/camera-upload.component.tsx","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/utils.ts","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/camera-upload.scss","webpack://@openmrs/esm-patient-attachments-app/./src/attachments/image-preview.scss"],"sourcesContent":["import { openmrsFetch } from '@openmrs/esm-framework';\n\nexport const attachmentUrl = '/ws/rest/v1/attachment';\n\nexport function getAttachmentByUuid(attachmentUuid: string, abortController: AbortController) {\n  return openmrsFetch(`${attachmentUrl}/${attachmentUuid}`, {\n    signal: abortController.signal,\n  });\n}\n\nexport function getAttachments(patientUuid: string, includeEncounterless: boolean, abortController: AbortController) {\n  return openmrsFetch(`${attachmentUrl}?patient=${patientUuid}&includeEncounterless=${includeEncounterless}`, {\n    signal: abortController.signal,\n  });\n}\n\nexport function createAttachment(\n  patientUuid: string,\n  content: string,\n  fileCaption: string,\n  abortController: AbortController,\n) {\n  const formData = new FormData();\n  const emptyFile = new File([''], 'randomfile');\n  formData.append('fileCaption', fileCaption);\n  formData.append('patient', patientUuid);\n  formData.append('file', emptyFile);\n  formData.append('base64Content', content);\n\n  return openmrsFetch(`${attachmentUrl}`, {\n    method: 'POST',\n    signal: abortController.signal,\n    body: formData,\n  });\n}\n\nexport function deleteAttachment(attachmentUuid: string, abortController: AbortController) {\n  return openmrsFetch(`${attachmentUrl}/${attachmentUuid}`, {\n    method: 'DELETE',\n    signal: abortController.signal,\n  });\n}\n","\n      import API from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./image-preview.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./image-preview.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { SyntheticEvent, useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UserHasAccess } from '@openmrs/esm-framework';\nimport { Button, ButtonSet, TextInput } from 'carbon-components-react';\nimport styles from './image-preview.scss';\n\ninterface ImagePreviewProps {\n  content: string;\n  collectCaption: boolean;\n  onSaveImage?(dataUri: string, caption: string): void;\n  onCancelCapture?(): void;\n}\n\nexport default function ImagePreview(props: ImagePreviewProps) {\n  const [saving, setSaving] = useState(false);\n  const [caption, setCaption] = useState('');\n  const { t } = useTranslation();\n\n  const saveImage = useCallback(\n    (e: SyntheticEvent) => {\n      if (!saving) {\n        e.preventDefault();\n        props.onSaveImage?.(props.content, caption);\n        setSaving(true);\n      }\n    },\n    [props.onSaveImage, saving],\n  );\n\n  const cancelCapture = useCallback(\n    (e: SyntheticEvent) => {\n      if (!saving) {\n        e.preventDefault();\n        props.onCancelCapture?.();\n      }\n    },\n    [props.onCancelCapture, saving],\n  );\n\n  const updateCaption = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    setCaption(e.target.value);\n  }, []);\n\n  return (\n    <form className={styles.overview} onSubmit={saveImage}>\n      <img src={props.content} alt={t('webcamPreview', 'Webcam preview')} />\n      {props.collectCaption && (\n        <div className={styles.captionFrame}>\n          <TextInput\n            id=\"caption\"\n            autoFocus\n            labelText={null}\n            readOnly={saving}\n            placeholder={t('attachmentCaptionInstruction', 'Enter caption')}\n            onChange={updateCaption}\n          />\n        </div>\n      )}\n      <UserHasAccess privilege=\"Create Attachment\">\n        <ButtonSet className={styles.buttonSetOverrides}>\n          <Button size=\"small\" onClick={saveImage} disabled={saving}>\n            {t('save', 'Save')}\n          </Button>\n          <Button kind=\"danger\" size=\"small\" onClick={cancelCapture} disabled={saving}>\n            {t('cancel', 'Cancel')}\n          </Button>\n        </ButtonSet>\n      </UserHasAccess>\n    </form>\n  );\n}\n","\n      import API from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./camera-upload.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./camera-upload.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback, useEffect, useState, useRef } from 'react';\nimport ImagePreview from './image-preview.component';\nimport styles from './camera-upload.scss';\nimport Camera from 'react-html5-camera-photo';\nimport { showToast } from '@openmrs/esm-framework';\nimport { useTranslation } from 'react-i18next';\nimport { readFileAsString } from './utils';\nimport 'react-html5-camera-photo/build/css/index.css';\n\nexport interface CameraUploadProps {\n  collectCaption?: boolean;\n  onTakePhoto?(dataUri: string): void;\n  onSavePhoto?(dataUri: string, caption: string): void;\n}\n\nconst CameraUpload: React.FC<CameraUploadProps> = ({ onSavePhoto, onTakePhoto, collectCaption = true }) => {\n  const mediaStream = useRef<MediaStream | undefined>();\n  const [error, setError] = useState<Error>(undefined);\n  const [dataUri, setDataUri] = useState('');\n  const { t } = useTranslation();\n\n  const clearCamera = useCallback(() => setDataUri(''), []);\n\n  const handleTakePhoto = useCallback(\n    (dataUri: string) => {\n      setDataUri(dataUri);\n      onTakePhoto?.(dataUri);\n    },\n    [onTakePhoto],\n  );\n\n  const upload = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    readFileAsString(e.target.files[0]).then(setDataUri);\n  }, []);\n\n  const setMediaStream = useCallback((ms: MediaStream) => {\n    mediaStream.current = ms;\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      showToast({\n        description: error.message,\n        kind: 'error',\n        title: t('cameraError', 'Camera Error'),\n      });\n    }\n  }, [error]);\n\n  useEffect(() => {\n    return () => {\n      mediaStream.current?.getTracks().forEach((t) => t.stop());\n    };\n  }, []);\n\n  const willSaveImage = useCallback(\n    (dataUri: string, caption: string) => onSavePhoto?.(dataUri, caption),\n    [onSavePhoto],\n  );\n\n  return (\n    <div className={styles.cameraSection}>\n      <div className={styles.frameContent}>\n        {dataUri ? (\n          <ImagePreview\n            content={dataUri}\n            onCancelCapture={clearCamera}\n            onSaveImage={willSaveImage}\n            collectCaption={collectCaption}\n          />\n        ) : (\n          <>\n            {!error && <Camera onTakePhoto={handleTakePhoto} onCameraStart={setMediaStream} onCameraError={setError} />}\n            <div>\n              <label htmlFor=\"uploadPhoto\" className={styles.choosePhoto}>\n                {t('selectPhoto', 'Select local photo instead')}\n              </label>\n              <input type=\"file\" id=\"uploadPhoto\" accept=\"image/*\" className={styles.uploadFile} onChange={upload} />\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CameraUpload;\n","import dayjs from 'dayjs';\nimport { attachmentUrl } from './attachments.resource';\n\nexport function readFileAsString(file: File) {\n  return new Promise<string>((resolve) => {\n    if (file) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        if (typeof reader.result === 'string') {\n          resolve(reader.result);\n        } else {\n          resolve('');\n        }\n      });\n\n      reader.addEventListener('error', () => {\n        resolve('');\n      });\n\n      reader.readAsDataURL(file);\n    } else {\n      resolve('');\n    }\n  });\n}\n\nexport function createGalleryEntry(data: any) {\n  return {\n    id: `${data.uuid}`,\n    src: `${window.openmrsBase}${attachmentUrl}/${data.uuid}/bytes`,\n    thumbnail: `${window.openmrsBase}${attachmentUrl}/${data.uuid}/bytes?view=complexdata.view.thumbnail`,\n    // thumbnail: `${window.openmrsBase}${attachmentUrl}/${res.data.uuid}/bytes`,\n    // thumbnailWidth: 320,\n    // thumbnailHeight: 212,\n    thumbnailWidth: 170,\n    thumbnailHeight: 130,\n    caption: data.comment,\n    isSelected: false,\n    dateTime: dayjs(data.dateTime).format('YYYY-MM-DD HH:mm:ss'),\n    bytesMimeType: data.bytesMimeType,\n    bytesContentFamily: data.bytesContentFamily,\n  };\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".-esm-patient-attachments__camera-upload__cameraSection___GDabH{padding:10px}.react-html5-camera-photo>img,.react-html5-camera-photo>video{width:100% !important}.-esm-patient-attachments__camera-upload__frameContent___7eo4Z{margin:auto;padding:2rem;width:80%}.-esm-patient-attachments__camera-upload__choosePhoto___gejpd{float:right;color:#0f62fe;cursor:pointer;margin:1rem 0}.-esm-patient-attachments__camera-upload__choosePhoto___gejpd:hover{color:#000;text-decoration:none}.-esm-patient-attachments__camera-upload__uploadFile___rLK99{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/attachments/camera-upload.scss\"],\"names\":[],\"mappings\":\"AAAA,gEACE,YAAA,CAIA,8DACE,qBAAA,CAIJ,+DACE,WAAA,CACA,YAAA,CACA,SAAA,CAGF,8DACE,WAAA,CACA,aAAA,CACA,cAAA,CACA,aAAA,CAEA,oEACE,UAAA,CACA,oBAAA,CAIJ,6DACE,YAAA\",\"sourcesContent\":[\".cameraSection {\\n  padding: 10px;\\n}\\n\\n:global(.react-html5-camera-photo) {\\n  & > img, & > video {\\n    width: 100% !important;\\n  }\\n}\\n\\n.frameContent {\\n  margin: auto;\\n  padding: 2rem;\\n  width: 80%;\\n}\\n\\n.choosePhoto {\\n  float: right;\\n  color: #0f62fe;\\n  cursor: pointer;\\n  margin: 1rem 0;\\n\\n  &:hover {\\n    color: #000;\\n    text-decoration: none;\\n  }\\n}\\n\\n.uploadFile {\\n  display: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"cameraSection\": \"-esm-patient-attachments__camera-upload__cameraSection___GDabH\",\n\t\"frameContent\": \"-esm-patient-attachments__camera-upload__frameContent___7eo4Z\",\n\t\"choosePhoto\": \"-esm-patient-attachments__camera-upload__choosePhoto___gejpd\",\n\t\"uploadFile\": \"-esm-patient-attachments__camera-upload__uploadFile___rLK99\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".-esm-patient-attachments__image-preview__overview___HwhU0 img{max-width:100%;max-height:500px;margin:auto;display:block}.-esm-patient-attachments__image-preview__buttonSetOverrides___6FpUR{justify-content:center;margin:auto;width:50%}.-esm-patient-attachments__image-preview__buttonSetOverrides___6FpUR button{max-width:20rem !important}.-esm-patient-attachments__image-preview__captionFrame___DP3uQ{margin-bottom:.3rem}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/attachments/image-preview.scss\"],\"names\":[],\"mappings\":\"AAAA,+DACE,cAAA,CACA,gBAAA,CACA,WAAA,CACA,aAAA,CAGF,qEACE,sBAAA,CACA,WAAA,CACA,SAAA,CAGF,4EACE,0BAAA,CAGF,+DACE,mBAAA\",\"sourcesContent\":[\".overview img {\\n  max-width: 100%;\\n  max-height: 500px;\\n  margin: auto;\\n  display: block;\\n}\\n\\n.buttonSetOverrides {\\n  justify-content: center;\\n  margin: auto;\\n  width: 50%;\\n}\\n\\n.buttonSetOverrides button {\\n  max-width: 20rem !important;\\n}\\n\\n.captionFrame {\\n  margin-bottom: .3rem;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"overview\": \"-esm-patient-attachments__image-preview__overview___HwhU0\",\n\t\"buttonSetOverrides\": \"-esm-patient-attachments__image-preview__buttonSetOverrides___6FpUR\",\n\t\"captionFrame\": \"-esm-patient-attachments__image-preview__captionFrame___DP3uQ\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["attachmentUrl","getAttachmentByUuid","attachmentUuid","abortController","openmrsFetch","signal","getAttachments","patientUuid","includeEncounterless","createAttachment","content","fileCaption","formData","FormData","emptyFile","File","append","method","body","deleteAttachment","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","ImagePreview","props","saving","setSaving","useState","caption","setCaption","t","useTranslation","saveImage","useCallback","e","preventDefault","onSaveImage","cancelCapture","onCancelCapture","updateCaption","target","value","className","styles","onSubmit","src","alt","collectCaption","TextInput","id","autoFocus","labelText","readOnly","placeholder","onChange","UserHasAccess","privilege","ButtonSet","Button","size","onClick","disabled","kind","onSavePhoto","onTakePhoto","mediaStream","useRef","error","setError","dataUri","setDataUri","clearCamera","handleTakePhoto","upload","readFileAsString","files","then","setMediaStream","ms","current","useEffect","showToast","description","message","title","getTracks","forEach","stop","willSaveImage","onCameraStart","onCameraError","htmlFor","type","accept","file","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","createGalleryEntry","data","uuid","window","openmrsBase","thumbnail","thumbnailWidth","thumbnailHeight","comment","isSelected","dateTime","dayjs","format","bytesMimeType","bytesContentFamily","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}