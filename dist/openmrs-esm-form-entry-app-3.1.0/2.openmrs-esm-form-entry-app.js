(window["webpackJsonpopenmrs-esm-form-entry"]=window["webpackJsonpopenmrs-esm-form-entry"]||[]).push([[2],{qIrM:function(e,t,r){"use strict";r.r(t),r.d(t,"bootstrap",function(){return ee}),r.d(t,"mount",function(){return te}),r.d(t,"unmount",function(){return re});var n=r("e4iD"),i=r("EM62"),o=r("Jxrt"),s=r("axyU"),a=r("5lCh"),c=r("Vgaj");const u=new c.ReplaySubject(1);var d=r("2kYt"),l=r("wgY5"),h=r("J+dc"),p=r("rgMP"),m=r("YtkY");let f=(()=>{class e{constructor(){}getCurrentUser(){return Object(p.getCurrentUser)()}openmrsFetch(e){return Object(p.openmrsObservableFetch)(e)}getCurrentUserLocation(){return this.openmrsFetch("/ws/rest/v1/session").pipe(Object(m.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var g=r("574M"),v=r("jOdJ"),b=r("vobO");let y=(()=>{class e{get nativeWindow(){return window}get openmrsRestBase(){return this.nativeWindow.openmrsBase+"/ws/rest/v1/"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),S=(()=>{class e{constructor(e,t){this.http=e,this.windowRef=t}getFormClobDataByUuid(e,t=null){let r=this.windowRef.openmrsRestBase+"clobdata";r+="/"+e;const n=(new b.d).set("v",t&&t.length>0?t:"full");return this.http.get(r,{params:n})}getFormMetaDataByUuid(e,t=null){let r=this.windowRef.openmrsRestBase+"form";r+="/"+e;const n=(new b.d).set("v",t&&t.length>0?t:"full");return this.http.get(r,{params:n})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),j=(()=>{class e{getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}getObject(e){const t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(r){return console.error(r),null}}setObject(e,t){window.localStorage.setItem(e,JSON.stringify(t))}remove(e){window.localStorage.removeItem(e)}clear(){window.localStorage.clear()}get storageLength(){return window.localStorage.length}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var w=r("GyFI");let P=(()=>{class e{constructor(e,t,r){this.formsResourceService=e,this.localStorage=t,this.formSchemaCompiler=r}getFormSchemaByUuid(e,t=!0){const r=new c.ReplaySubject(1),n=this.getCachedCompiledSchemaByUuid(e);return n&&!0===t?r.next(n):this.getFormSchemaByUuidFromServer(e).subscribe(t=>{const n=t.form,i=t.referencedComponents;this.formsResourceService.getFormMetaDataByUuid(e).subscribe(t=>{t.pages=n.pages||[],t.referencedForms=n.referencedForms||[],t.processor=n.processor;const o=this.formSchemaCompiler.compileFormSchema(t,i);this.cacheCompiledSchemaByUuid(e,o),r.next(o)},e=>{console.error(e),r.error(e)})},e=>{console.error(e),r.error(e)}),r}getCachedCompiledSchemaByUuid(e){return this.localStorage.getObject(e)}cacheCompiledSchemaByUuid(e,t){this.localStorage.setObject(e,t)}getFormSchemaByUuidFromServer(e){const t=new c.ReplaySubject(1);return this.fetchFormSchemaUsingFormMetadata(e).subscribe(e=>{e.referencedForms&&e.referencedForms.length>0?this.getFormSchemaWithReferences(e).subscribe(e=>{t.next(e)},e=>{console.error(e),t.error(e)}):t.next({form:e,referencedComponents:[]})},e=>{console.error(e),t.error(e)}),t}getFormSchemaWithReferences(e){const t=new c.ReplaySubject(1);return this.fetchFormSchemaReferences(e).subscribe(r=>{t.next({form:e,referencedComponents:r})},e=>{console.error(e),t.error(e)}),t}fetchFormSchemaReferences(e){const t=[],r=e.referencedForms;Array.isArray(r)&&r.length>0&&this.getFormUuidArray(r).forEach((e,r)=>{t.push(this.fetchFormSchemaUsingFormMetadata(e))});const n=[];return c.Observable.create(e=>{if(0===t.length)return void e.next(n);let r=t[0];for(let n=1;n<t.length;n++)r=r.pipe(Object(g.a)(t[n]));r.subscribe(e=>{n.push(e)},t=>{e.error(t)},()=>{e.next(n)})}).pipe(Object(v.a)())}fetchFormSchemaUsingFormMetadata(e){return c.Observable.create(t=>this.formsResourceService.getFormMetaDataByUuid(e).subscribe(e=>{e.resources.length>0?this.formsResourceService.getFormClobDataByUuid(e.resources[0].valueReference).subscribe(e=>{t.next(e)},e=>{console.error(e),t.error(e)}):t.error(e.display+":This formMetadataObject has no resource")},e=>{console.error(e),t.error(e)})).pipe(Object(v.a)())}getFormUuidArray(e){const t=[];return e.forEach((e,r)=>{t.push(e.ref.uuid)}),t}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](S),i["\u0275\u0275inject"](j),i["\u0275\u0275inject"](w.f))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var O=r("cJ9h"),U=r("4e/d"),C=r("tlLU");let E=(()=>{class e{constructor(e,t){this.http=e,this.windoRef=t,this.v="custom:(uuid,encounterDatetime,patient:(uuid,uuid),form:(uuid,name),visit:(uuid,display,auditInfo,startDatetime,stopDatetime,location:(uuid,display),visitType:(uuid,name)),location:ref,encounterType:ref,encounterProviders:(uuid,display,provider:(uuid,display)))"}getUrl(){return this.windoRef.openmrsRestBase}getEncountersByPatientUuid(e,t=!1,r=null){if(!e)return null;const n=this.getUrl()+"encounter";let i=(new b.d).set("patient",e).set("v",this.v);return this.http.get(n,{params:i}).pipe(Object(O.a)(e=>e.results.length>=500?(i=i.set("startIndex","500"),this.http.get(n,{params:i}).pipe(Object(m.a)(t=>e.results.concat(t.results)))):Object(c.of)(e.results)))}getEncounterByUuid(e){if(!e)return null;const t=(new b.d).set("v","custom:(uuid,encounterDatetime,patient:(uuid,uuid,person,identifiers:full),form:(uuid,name),visit:(uuid,visitType,display,startDatetime,stopDatetime),location:ref,encounterType:ref,encounterProviders:(uuid,display,provider:(uuid,display)),orders:full,obs:(uuid,obsDatetime,concept:(uuid,uuid,name:(display)),value:ref,groupMembers))"),r=this.getUrl()+"encounter/"+e;return this.http.get(r,{params:t}).pipe(Object(U.a)(()=>Object(C.a)(e)))}getEncounterTypes(e){if(!e)return null;const t=this.getUrl()+"encountertype";return this.http.get(t).pipe(Object(m.a)(e=>e.results))}saveEncounter(e){if(!e)return null;const t=this.getUrl()+"encounter",r=new b.c({"Content-Type":"application/json","x-omrs-offline-response-status":"200","x-omrs-offline-response-body":JSON.stringify({uuid:Object(p.generateOfflineUuid)()})});return this.http.post(t,JSON.stringify(e),{headers:r})}updateEncounter(e,t){if(!t||!e)return null;const r=this.getUrl()+"encounter/"+e,n=new b.c({"Content-Type":"application/json","x-omrs-offline-response-status":"200","x-omrs-offline-response-body":JSON.stringify({uuid:e})});return this.http.post(r,JSON.stringify(t),{headers:n})}voidEncounter(e){if(!e)return null;const t=this.getUrl()+"encounter/"+e+"?!purge",r=new b.c({"Content-Type":"application/json"});return this.http.delete(t,{headers:r})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var I=r("8j5Y");let x=(()=>{class e{constructor(e,t){this.http=e,this.windowRef=t,this.v="full"}getUrl(){return this.windowRef.openmrsRestBase+"person"}getPersonByUuid(e,t=null){let r=this.getUrl();r+="/"+e;const n=(new b.d).set("v",t&&t.length>0?t:this.v);return this.http.get(r,{params:n})}saveUpdatePerson(e,t){if(!t||!e)return null;const r=this.getUrl()+"/"+e,n=new b.c({"Content-Type":"application/json"});return this.http.post(r,JSON.stringify(t),{headers:n}).pipe(Object(m.a)(e=>e.person))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),R=(()=>{class e{constructor(e,t,r){this.http=e,this.windowRef=t,this.personService=r}searchProvider(e){return this.getAllProviders().pipe(Object(m.a)(t=>t.filter(t=>t.display.toLowerCase().includes(e.toLowerCase()))))}getProviderByUuid(t){return this.http.get(this.windowRef.openmrsRestBase+"provider/"+t+"?v="+e.v).pipe(Object(U.a)(()=>this.getProviderByUuidFallback(t)))}getProviderByUuidFallback(e){return this.getAllProviders().pipe(Object(m.a)(t=>t.find(t=>t.uuid===e)))}getAllProviders(){return this.http.get(this.windowRef.openmrsRestBase+"provider?q=&v="+e.v).pipe(Object(m.a)(e=>e.results))}getUrl(t){return t?this.windowRef.openmrsRestBase+"provider/"+t+"?v="+e.v:this.windowRef.openmrsRestBase+"provider?q=&v="+e.v}}return e.v="custom:(uuid,display,person:(uuid))",e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y),i["\u0275\u0275inject"](x))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),B=(()=>{class e{constructor(e,t){this.http=e,this.windowRef=t}getLocationByUuid(e){const t=this.getUrl(e);return this.http.get(t).pipe(Object(U.a)(()=>this.getLocationByUuidFallback(e)))}getLocationByUuidFallback(e){return this.getAllLocations().pipe(Object(m.a)(t=>t.find(t=>t.uuid===e)))}searchLocation(e){return this.getAllLocations().pipe(Object(m.a)(t=>t.filter(t=>t.display.toLowerCase().includes(e.toLowerCase()))))}getAllLocations(){const e=this.getUrl();return this.http.get(e).pipe(Object(m.a)(e=>e.results))}getUrl(t){return t?this.windowRef.openmrsRestBase+"location/"+t+"?v="+e.v:this.windowRef.openmrsRestBase+"location?q=&v="+e.v}}return e.v="custom:(uuid,display)",e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),D=(()=>{class e{constructor(e,t){this.http=e,this.windowRef=t,this.v="custom:(uuid,name,conceptClass,setMembers)"}getUrl(){return this.windowRef.openmrsRestBase+"concept"}searchConcept(e,t=!1,r=null){const n=this.getUrl(),i=(new b.d).set("q",e).set("v",r&&r.length>0?r:this.v);return this.http.get(n,{params:i}).pipe(Object(m.a)(e=>e.results))}getConceptByUuid(e,t=!1,r=this.v){let n=this.getUrl();n+="/"+e;const i=(new b.d).set("v",r&&r.length>0?r:this.v);return this.http.get(n,{params:i})}getConceptByConceptClassesUuid(e,t){let r=[];return this.searchConcept(e).pipe(Object(h.a)(1)).subscribe(e=>{r=this.filterResultsByConceptClassesUuid(e,t)},e=>{}),r}filterResultsByConceptClassesUuid(e,t){return e.filter(e=>t.find(t=>e.conceptClass.uuid===t))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),F=(()=>{class e{constructor(e,t,r,n){this.providerResourceService=e,this.locationResourceService=t,this.conceptResourceService=r,this.localStorageService=n}getDataSources(){return{location:{resolveSelectedValue:this.getLocationByUuid.bind(this),searchOptions:this.findLocation.bind(this)},provider:{resolveSelectedValue:this.getProviderByUuid.bind(this),searchOptions:this.findProvider.bind(this)},drug:{resolveSelectedValue:this.resolveConcept.bind(this),searchOptions:this.findDrug.bind(this)},problem:{resolveSelectedValue:this.resolveConcept.bind(this),searchOptions:this.findProblem.bind(this)},conceptAnswers:this.getWhoStagingCriteriaDataSource()}}getWhoStagingCriteriaDataSource(){const e=new c.Subject,t={cachedOptions:[],dataSourceOptions:{concept:void 0},resolveSelectedValue:void 0,searchOptions:void 0,dataFromSourceChanged:e.asObservable(),changeConcept:void 0},r=e=>{if(t.cachedOptions.length>0)return c.Observable.create(e=>{e.next(t.cachedOptions)});const r=this.getConceptSetMembers(t.dataSourceOptions.concept);return r.subscribe(e=>{t.cachedOptions=e}),r};return t.resolveSelectedValue=e=>this.resolveConcept(e),t.searchOptions=r,t.changeConcept=n=>{t.dataSourceOptions.concept=n,t.cachedOptions=[],e.next([]),r().subscribe(t=>{e.next(t)})},t}findProvider(e){return this.providerResourceService.searchProvider(e).pipe(Object(m.a)(e=>e.filter(e=>!!e.person).map(this.mapProvider)),Object(I.a)(e=>this.setCachedProviderSearchResults(e)))}getProviderByUuid(e){return this.providerResourceService.getProviderByUuid(e).pipe(Object(m.a)(this.mapProvider))}mapProvider(e){return e&&{label:e.display,value:e.uuid,providerUuid:e.uuid}}findLocation(e){return this.locationResourceService.searchLocation(e).pipe(Object(m.a)(e=>e.map(this.mapLocation)),Object(h.a)(10))}getLocationByUuid(e){return this.locationResourceService.getLocationByUuid(e).pipe(Object(m.a)(this.mapLocation))}mapLocation(e){return e&&{label:e.display,value:e.uuid}}resolveConcept(e){return this.conceptResourceService.getConceptByUuid(e).pipe(Object(m.a)(this.mapConcept))}getConceptAnswers(e){return this.conceptResourceService.getConceptByUuid(e).pipe(Object(m.a)(e=>e.answers.map(this.mapConcept)))}getConceptSetMembers(e){return this.conceptResourceService.getConceptByUuid(e).pipe(Object(m.a)(e=>e.setMembers.map(this.mapConcept).sort((e,t)=>e.label>t.label?1:0)))}findDrug(e){return this.conceptResourceService.searchConcept(e).pipe(Object(m.a)(e=>e.filter(e=>e.conceptClass&&"8d490dfc-c2cc-11de-8d13-0010c6dffd0f"===e.conceptClass.uuid).map(this.mapConcept)))}findProblem(e){const t=["8d4918b0-c2cc-11de-8d13-0010c6dffd0f","8d492b2a-c2cc-11de-8d13-0010c6dffd0f","8d492954-c2cc-11de-8d13-0010c6dffd0f","8d491a9a-c2cc-11de-8d13-0010c6dffd0f"];return this.conceptResourceService.searchConcept(e).pipe(Object(m.a)(e=>e.filter(e=>e.conceptClass&&t.includes(e.conceptClass.uuid)).map(this.mapConcept)))}mapConcept(e){return e&&{value:e.uuid,label:e.name.display}}getCachedProviderSearchResults(){return this.localStorageService.getObject("cachedproviders")}setCachedProviderSearchResults(e){this.localStorageService.setObject("cachedproviders",e)}getPatientObject(e){const t={};return t.sex="male"===(null==e?void 0:e.gender)?"M":"F",t.birthdate=new Date(null==e?void 0:e.birthDate),t.age=parseInt(Object(p.age)(null==e?void 0:e.birthDate).match(/\d+/g).join("")),"female"===(null==e?void 0:e.gender)&&(t.gendercreatconstant=.85),"male"===(null==e?void 0:e.gender)&&(t.gendercreatconstant=1),t}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](R),i["\u0275\u0275inject"](B),i["\u0275\u0275inject"](D),i["\u0275\u0275inject"](j))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),M=(()=>{class e{constructor(e,t,r,n,i){this.encounterAdapter=e,this.personAttributeAdapter=t,this.encounterResourceService=r,this.personResourceService=n,this.formDataSourceService=i,this.payloadTypes=["encounter","personAttribute"]}submitPayload(e,t=this.payloadTypes){const r=this.createPayloadBatch(e,t);return c.Observable.create(e=>Object(c.forkJoin)(r).subscribe(t=>{if(t){const r=this.processFormSubmissionResponse(t);r.hasError?e.error(r):e.next(r)}},e=>{console.error("An unknown error occurred, please try again----\x3e",e)})).pipe(Object(v.a)())}createPayloadBatch(e,t){const r=[];return Array.isArray(t)&&t.length>0&&t.forEach((t,n)=>{switch(t){case"encounter":const n=this.formDataSourceService.getCachedProviderSearchResults();if(n&&n.length>0&&!e.valueProcessingInfo.providerUuid){const t=this.getProviderUuid(n,e);e=this.setProviderUuid(e,t)}const i=this.encounterAdapter.generateFormPayload(e);this.isEmpty(i)||r.push(this.submitEncounterPayload(e,i).pipe(Object(U.a)(e=>Object(c.of)({hasError:!0,payloadType:[t],response:e,errorMessages:this.processFormSubmissionErrors(e,t,i)}))));break;case"personAttribute":const o=this.personAttributeAdapter.generateFormPayload(e);this.isEmpty(o)||r.push(this.submitPersonAttributePayload(e,o).pipe(Object(U.a)(e=>Object(c.of)({hasError:!0,payloadType:[t],response:e,errorMessages:this.processFormSubmissionErrors(e,t,o)}))));break;default:console.error("Invalid Payload Type, Please register")}}),r}submitEncounterPayload(e,t){return t.uuid?this.encounterResourceService.updateEncounter(t.uuid,t):this.encounterResourceService.saveEncounter(t)}submitPersonAttributePayload(e,t){return e.valueProcessingInfo.personUuid?this.personResourceService.saveUpdatePerson(e.valueProcessingInfo.personUuid,{attributes:t}):Object(c.throwError)("Form does not have: form.valueProcessingInfo.personUuid")}processFormSubmissionResponse(e){const t=[];if(e.forEach((e,r)=>{e&&e.hasError&&t.push(e)}),t.length>1){const r={hasError:!0,payloadType:this.payloadTypes,response:e,errorMessages:[]};return t.forEach((e,t)=>{void 0!==e&&e.hasError&&r.errorMessages.push.apply(r.errorMessages,e.errorMessages)}),r}return 1===t.length?t[0]:e}processFormSubmissionErrors(e,t,r){const n=[];switch(t){case"encounter":n.push("Encounter Error: "+this.generateUserFriendlyErrorMessage(e));break;case"personAttribute":n.push("Person Attribute Error: "+this.generateUserFriendlyErrorMessage(e));break;default:n.push("Unknown Payload: "+this.generateUserFriendlyErrorMessage(e))}return n}logFormError(e){}generateUserFriendlyErrorMessage(e){let t="An error occurred, please try again";if(this.isEmpty(e.error))t="Please check your internet connection, you seem to be offline.";else if(this.isEmpty(e.error.error.fieldErrors)){if(!this.isEmpty(e.error.detail)){t=e.error.detail.split("\n")[0];const r=t.indexOf(": ")+1;t=t.substring(r,t.length)}}else{const r=[];for(const t in e.error.error.fieldErrors)e.error.error.fieldErrors.hasOwnProperty(t)&&e.error.error.fieldErrors[t].forEach(e=>{r.push(e.message)});t=JSON.stringify(r)}return t}getProviderUuid(e,t){const r=t.searchNodeByQuestionId("provider");let n=null;r.length>0&&(n=r[0].control.value);const i=e.filter(e=>e.id===n);return i.length>0?i[0].providerUuid:n}setProviderUuid(e,t){return e.valueProcessingInfo.providerUuid=t,e}isEmpty(e){return Array.isArray(e)?0===e.length:null==e||"string"==typeof e&&0===e.trim().length||this.isObjectEmpty(e)}isObjectEmpty(e){for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](w.b),i["\u0275\u0275inject"](w.i),i["\u0275\u0275inject"](E),i["\u0275\u0275inject"](x),i["\u0275\u0275inject"](F))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var k=r("nsO7");let L=(()=>{class e{constructor(e){this.encounterResource=e}getPreviousEncounter(e,t){return new Promise((r,n)=>{this.encounterResource.getEncountersByPatientUuid(t).subscribe(t=>{if(t){const i=t.sort((e,t)=>new Date(t.encounterDatetime).getTime()-new Date(e.encounterDatetime).getTime()),o=k.find(i,t=>t.encounterType.uuid===e);o?this.encounterResource.getEncounterByUuid(o.uuid).pipe(Object(h.a)(1)).subscribe(e=>{r(e)},e=>{n(e)}):r(Object.create({}))}},e=>{console.error("Previous encounter",e)})})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](E))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{getConfig(){var e;let t=null===(e=Object(p.getConfigStore)("@openmrs/esm-form-entry-app").getState())||void 0===e?void 0:e.config;return Object(p.getConfigStore)("@openmrs/esm-form-entry-app").subscribe(e=>{e.loaded&&e&&(t=e.config)}),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e,t,r){this.http=e,this.windowRef=t,this.configResource=r}getMonthlySchedule(e){const t=`${this.configResource.getConfig().appointmentsResourceUrl}?startDate=${e.startDate}&endDate=${e.endDate}&locationUuids=${e.locationUuids}&limit=${e.limit}&programType=${e.programType}&groupBy=groupByPerson,groupByAttendedDate,groupByRtcDate`;return this.http.get(`${this.windowRef.nativeWindow.openmrsBase}${t}`)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y),i["\u0275\u0275inject"](A))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var T=r("nIj0");function N(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h6",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("Encounter date time ",e.encounterDate," @ ",e.encounterTime,"")}}function V(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"form",13),i["\u0275\u0275element"](1,"form-renderer",14),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("formGroup",e.form.rootNode.control),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("node",e.form.rootNode)}}function J(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,N,2,2,"h6",7),i["\u0275\u0275template"](3,V,2,2,"form",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",9),i["\u0275\u0275elementStart"](5,"button",10),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).closeForm()}),i["\u0275\u0275text"](6,"Discard"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"button",11),i["\u0275\u0275listener"]("click",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSubmit(t)}),i["\u0275\u0275text"](8,"Save and close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.singleSpaProps.encounterUuid),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.formSchema)}}const $=function(e){return{error:e}};function W(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onErrorPanelLostFocus()}),i["\u0275\u0275template"](2,J,9,2,"div",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,$,e.hasValidationErrors)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.isLoading)}}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"div",16),i["\u0275\u0275elementStart"](2,"div",17),i["\u0275\u0275elementStart"](3,"div",18),i["\u0275\u0275elementStart"](4,"label",19),i["\u0275\u0275text"](5,"Active loading indicator"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275namespaceSVG"](),i["\u0275\u0275elementStart"](6,"svg",20),i["\u0275\u0275elementStart"](7,"title"),i["\u0275\u0275text"](8,"Active loading indicator"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"circle",21),i["\u0275\u0275element"](10,"circle",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275namespaceHTML"](),i["\u0275\u0275elementStart"](11,"div",23),i["\u0275\u0275text"](12,"Loading..."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}let Y=(()=>{class e{constructor(e,t,r,n,i,o,s,a,c,u,d,l,h,p,m){this.openmrsApi=e,this.formSchemaService=t,this.encounterResourceService=r,this.questionFactory=n,this.formFactory=i,this.obsValueAdapater=o,this.orderAdaptor=s,this.encAdapter=a,this.dataSources=c,this.formDataSourceService=u,this.formSubmissionService=d,this.formErrorsService=l,this.patientPreviousEncounter=h,this.monthlyScheduleResourceService=p,this.configResourceService=m,this.sections={},this.activeTab=0,this.formSubmitted=!1,this.triedSubmitting=!1,this.errorPanelOpen=!1,this.submittedOrder=[],this.isLoading=!0}get encounterDate(){var e;return l(null===(e=this.encounter)||void 0===e?void 0:e.encounterDatetime).format("YYYY-MM-DD")}get encounterTime(){var e;return l(null===(e=this.encounter)||void 0===e?void 0:e.encounterDatetime).format("HH:mm")}get hasValidationErrors(){return this.triedSubmitting&&this.form&&!this.form.valid}ngOnInit(){this.config=this.configResourceService.getConfig(),this.launchForm().subscribe(e=>{this.isLoading=!1},e=>{console.error("Error rendering form",e),this.loadingError="Error loading form",this.isLoading=!1})}displayLabOrdersNotification(){var e;const t=null!==(e=this.submittedOrder.map((e,t)=>` ${t+1} : ${e.display} : ${e.orderNumber}`).join())&&void 0!==e?e:"";t.length&&Object(p.showNotification)({title:"Lab order(s) generated",kind:"success",critical:!0,description:t})}onSubmit(e){this.isFormValid()?this.saveForm().subscribe(e=>{this.encounterUuid=e[0]&&e[0].uuid,this.encounterUuid&&(this.encounterResourceService.getEncounterByUuid(this.encounterUuid).pipe(Object(h.a)(1)).subscribe(e=>{e&&e.orders&&(this.submittedOrder=e.orders.filter(({auditInfo:e})=>!e.dateVoided),this.displayLabOrdersNotification())}),Object(p.showToast)({critical:!0,kind:"success",description:"The form has been submitted successfully",title:this.formName}),this.closeForm())},e=>{console.error("Error submitting form",e),Object(p.detach)("patient-chart-workspace-slot","patient-form-entry-workspace"),Object(p.showToast)({critical:!0,kind:"error",description:`An error has occurred while submitting the form ${JSON.stringify(e,null,2)}`,title:this.formName})}):(this.triedSubmitting=!0,this.form.showErrors=!0,setTimeout(()=>{this.errorPanelOpen=!0},10))}closeForm(){Object(p.detach)("patient-chart-workspace-slot","patient-form-entry-workspace")}onEditSaved(){this.singleSpaProps.encounterUuid=this.encounterUuid,u.next(this.singleSpaProps),this.resetVariables(),this.ngOnInit()}onExpandCollapseErrorPanel(e){this.errorPanelOpen=!this.errorPanelOpen}onErrorPanelLostFocus(){this.errorPanelOpen=!1}resetVariables(){this.data=void 0,this.sections={},this.formGroup=void 0,this.activeTab=0,this.form=void 0,this.formName=void 0,this.formUuid=void 0,this.encounterUuid=void 0,this.encounter=void 0,this.formSchema=void 0,this.patient=void 0,this.loadingError=void 0,this.formSubmitted=!1,this.singleSpaProps=void 0}getProps(){const e=new c.ReplaySubject(1);return u.pipe(Object(h.a)(1)).subscribe(t=>{this.singleSpaProps=t;const r=t.formUuid;r&&"string"==typeof r?e.next(t):e.error("Form UUID is required. props.formUuid missing")},t=>{e.error(t)}),e.asObservable()}setUpWHOCascading(){try{if(this.form){let e=this.form.searchNodeByQuestionId("adultWhoStage");0===e.length&&(e=this.form.searchNodeByQuestionId("pedWhoStage"));const t=e[0];null==t||t.control.valueChanges.subscribe(e=>{if(e&&""!==e){const t=this.form.dataSourcesContainer.dataSources.conceptAnswers;t.changeConcept&&t.changeConcept(e)}})}}catch(e){console.error(`Error setting up Who Staging Cascading, ${e}`)}}loadPatientPreviousEncounters(e,t){var r;this.patientPreviousEncounter.getPreviousEncounter(null===(r=e.formSchema.encounterType)||void 0===r?void 0:r.uuid,this.singleSpaProps.patientUuid).then(e=>{this.prevEncounter=e||Object.create({}),this.createForm(),t.next(this.form)})}launchForm(){const e=new c.ReplaySubject(1),t=()=>{this.loadAllFormDependencies().pipe(Object(h.a)(1)).subscribe(t=>{this.singleSpaProps.isOffline?this.loadPatientPreviousEncounters(t,e):(this.createForm(),e.next(this.form))},t=>{e.error(t)})};return this.getProps().pipe(Object(h.a)(1)).subscribe(e=>{this.formUuid=e.formUuid,this.patient=e.patient,e.encounterUuid&&(this.encounterUuid=e.encounterUuid),e.visitUuid&&!this.encounterUuid&&(this.visitUuid=e.visitUuid),t()},t=>{e.error(t)}),e.asObservable()}loadAllFormDependencies(){const e=new c.ReplaySubject(1),t=[];return t.push(this.fetchCompiledFormSchema(this.formUuid).pipe(Object(h.a)(1))),t.push(this.openmrsApi.getCurrentUserLocation().pipe(Object(h.a)(1))),this.encounterUuid&&t.push(this.getEncounterToEdit(this.encounterUuid).pipe(Object(h.a)(1))),Object(c.forkJoin)(t).subscribe(t=>{this.formSchema=t[0]||null,this.loggedInUser=t[1]||null,this.encounter=t[2]||null,e.next({formSchema:t[0],patient:this.patient,user:t[1],encounter:4===t.length?t[2]:null})},t=>{e.error(new Error("There was an error fetching form data. Details: "+t))}),e.asObservable()}fetchCompiledFormSchema(e){const t=new c.ReplaySubject(1);return this.formSchemaService.getFormSchemaByUuid(e,!0).pipe(Object(h.a)(1)).subscribe(e=>{t.next(e)},e=>{t.error(new Error("Error fetching form schema. Details: "+e))}),t.asObservable()}getEncounterToEdit(e){const t=new c.ReplaySubject(1),r=this.encounterResourceService.getEncounterByUuid(e).subscribe(e=>{t.next(e),r.unsubscribe()},e=>{t.error(e),r.unsubscribe()});return t.asObservable()}createForm(){this.wireDataSources(),this.formName=this.formSchema.name,this.form=this.formFactory.createForm(this.formSchema,this.dataSources.dataSources),this.setUpWHOCascading(),this.encounter?(this.populateEncounterForEditing(),this.form.valueProcessingInfo.encounterUuid=this.singleSpaProps.encounterUuid):(this.form.valueProcessingInfo.patientUuid=this.singleSpaProps.patientUuid,this.setDefaultValues()),this.setUpPayloadProcessingInformation()}wireDataSources(){this.registerConfigurableDataSources(),this.dataSources.registerDataSource("location",this.formDataSourceService.getDataSources().location),this.dataSources.registerDataSource("provider",this.formDataSourceService.getDataSources().provider),this.dataSources.registerDataSource("drug",this.formDataSourceService.getDataSources().drug),this.dataSources.registerDataSource("problem",this.formDataSourceService.getDataSources().problem),this.dataSources.registerDataSource("personAttribute",this.formDataSourceService.getDataSources().location),this.dataSources.registerDataSource("conceptAnswers",this.formDataSourceService.getDataSources().conceptAnswers),this.dataSources.registerDataSource("patient",{visitTypeUuid:this.singleSpaProps.visitTypeUuid},!0),this.dataSources.registerDataSource("patient",this.formDataSourceService.getPatientObject(this.patient),!0),this.dataSources.registerDataSource("rawPrevEnc",this.prevEncounter,!1),this.dataSources.registerDataSource("userLocation",this.loggedInUser.sessionLocation)}setDefaultValues(){const e=l().format(),t=this.form.searchNodeByQuestionId("encDate");t.length>0&&t[0].control.setValue(e);const r=this.form.searchNodeByQuestionId("location","encounterLocation");r.length>0&&this.loggedInUser&&this.loggedInUser.sessionLocation&&r[0].control.setValue(this.loggedInUser.sessionLocation.uuid);const n=this.form.searchNodeByQuestionId("provider","encounterProvider");n.length>0&&this.loggedInUser&&this.loggedInUser.currentProvider&&n[0].control.setValue(this.loggedInUser.currentProvider.uuid)}setUpPayloadProcessingInformation(){var e,t;try{if(this.loggedInUser){if(this.form.valueProcessingInfo.personUuid=this.singleSpaProps.patientUuid,this.form.valueProcessingInfo.patientUuid=this.singleSpaProps.patientUuid,this.form.valueProcessingInfo.formUuid=this.formSchema.uuid,this.form.valueProcessingInfo.providerUuid=null===(t=null===(e=this.loggedInUser)||void 0===e?void 0:e.currentProvider)||void 0===t?void 0:t.uuid,!this.formSchema.encounterType)throw this.isLoading=!1,new Error("Please associate the form with an encounter type.");this.form.valueProcessingInfo.encounterTypeUuid=this.formSchema.encounterType.uuid,this.encounterUuid&&(this.form.valueProcessingInfo.encounterUuid=this.encounterUuid),this.visitUuid&&(this.form.valueProcessingInfo.visitUuid=this.visitUuid)}}catch(r){console.error(r)}}populateEncounterForEditing(){this.encounter&&this.encAdapter.populateForm(this.form,this.encounter)}isFormValid(){return this.form.valid||this.form.markInvalidControls(this.form.rootNode),this.form.valid}saveForm(){return this.formSubmissionService.submitPayload(this.form)}registerConfigurableDataSources(){const{dataSources:e}=this.config;e.monthlySchedule&&this.dataSources.registerDataSource("monthlyScheduleResourceService",this.monthlyScheduleResourceService)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](P),i["\u0275\u0275directiveInject"](E),i["\u0275\u0275directiveInject"](w.j),i["\u0275\u0275directiveInject"](w.e),i["\u0275\u0275directiveInject"](w.g),i["\u0275\u0275directiveInject"](w.h),i["\u0275\u0275directiveInject"](w.b),i["\u0275\u0275directiveInject"](w.a),i["\u0275\u0275directiveInject"](F),i["\u0275\u0275directiveInject"](M),i["\u0275\u0275directiveInject"](w.d),i["\u0275\u0275directiveInject"](L),i["\u0275\u0275directiveInject"](_),i["\u0275\u0275directiveInject"](A))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["my-app-fe-wrapper"]],decls:4,vars:3,consts:[[1,"error-text"],[3,"ngClass",4,"ngIf"],["class","loader-container",4,"ngIf"],[3,"ngClass"],[1,"content",3,"click"],["class","form-container",4,"ngIf"],[1,"form-container"],["class","encounterHeader",4,"ngIf"],["class","bx--form no-padding",3,"formGroup",4,"ngIf"],[1,"bx-btn--set","button-set"],["type","button",1,"bx--btn","bx--btn--secondary",3,"click"],["type","submit",1,"bx--btn","bx--btn--primary",3,"click"],[1,"encounterHeader"],[1,"bx--form","no-padding",3,"formGroup"],[3,"node"],[1,"loader-container"],["aria-live","assertive",1,"loader"],[1,"bx--inline-loading__animation"],["aria-atomic","true","aria-labelledby","loading-id-2","aria-live","assertive",1,"bx--loading","bx--loading--small"],["id","loading-id-2",1,"bx--visually-hidden"],["viewBox","0 0 100 100",1,"bx--loading__svg"],["cx","50%","cy","50%","r","44",1,"bx--loading__background"],["cx","50%","cy","50%","r","44",1,"bx--loading__stroke"],[1,"bx--inline-loading__text"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,W,3,4,"div",1),i["\u0275\u0275template"](3,q,13,0,"div",2)),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t.loadingError),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.formSubmitted),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isLoading))},directives:[d.i,d.g,T.s,T.m,T.h,w.k],styles:[".error-text[_ngcontent-%COMP%]{color:var(--omrs-color-danger)}.title-icon-size[_ngcontent-%COMP%]{height:.8rem;width:.8rem}.no-errors[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{margin-top:-1px;width:55%;height:80%;padding:4px;overflow-y:scroll;overflow-x:hidden}.sidebar[_ngcontent-%COMP%]   .closed[_ngcontent-%COMP%]{height:80px;width:28px;margin-top:-1px}.error-content[_ngcontent-%COMP%]   .closed[_ngcontent-%COMP%]{display:none}.error-content[_ngcontent-%COMP%]{border-top:1px solid #d3d3d3;margin:-4px;padding:4px}.error-title[_ngcontent-%COMP%]   .closed[_ngcontent-%COMP%]{transform:rotate(90deg);margin-top:14px}.no-padding[_ngcontent-%COMP%]{margin-left:-2rem;margin-right:-2rem}.center[_ngcontent-%COMP%]{align-items:center;height:100vh}.center[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%]{font-size:40px!important;justify-content:space-between}.button-set[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:4rem;align-items:baseline;min-width:50%}.omrs-breakpoint-gt-tablet[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%], .omrs-breakpoint-gt-tablet   [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{height:calc(100vh - 6rem)}.omrs-breakpoint-gt-tablet[_nghost-%COMP%]   .button-set[_ngcontent-%COMP%], .omrs-breakpoint-gt-tablet   [_nghost-%COMP%]   .button-set[_ngcontent-%COMP%]{padding:0}.omrs-breakpoint-lt-desktop[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%], .omrs-breakpoint-lt-desktop   [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{height:calc(100vh - 3rem)}.omrs-breakpoint-lt-desktop[_nghost-%COMP%]   .button-set[_ngcontent-%COMP%], .omrs-breakpoint-lt-desktop   [_nghost-%COMP%]   .button-set[_ngcontent-%COMP%]{padding:1.5rem 1rem;background-color:#fff}.loader-container[_ngcontent-%COMP%]{height:100vh}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:50%}.encounterHeader[_ngcontent-%COMP%]{font-family:IBM Plex Sans,sans-serif;font-size:14px;line-height:22px;font-weight:600;letter-spacing:.16px;border-bottom:1px solid var(--brand-03);padding:.625rem}"]}),e})();function H(e,t){1&e&&i["\u0275\u0275element"](0,"my-app-fe-wrapper")}let G=(()=>{class e{constructor(){this.title="ampath-esm-angular-form-entry"}ngOnInit(){this.sub=u.subscribe(e=>{this.view=e.view},e=>{})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["my-app-root"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,H,1,0,"my-app-fe-wrapper",0),2&e&&i["\u0275\u0275property"]("ngIf","form"===t.view)},directives:[d.i,Y],styles:[""]}),e})(),Q=(()=>{class e{constructor(e,t){this.http=e,this.windowRef=t,this.v="custom:(uuid,display,identifiers:(identifier,uuid,preferred,location:(uuid,name),identifierType:(uuid,name,format,formatDescription,validator)),person:(uuid,display,gender,birthdate,dead,age,deathDate,birthdateEstimated,causeOfDeath,preferredName:(uuid,preferred,givenName,middleName,familyName),attributes:(uuid,display,value,attributeType,dateCreated,dateChanged),preferredAddress:(uuid,preferred,address1,address2,cityVillage,longitude,stateProvince,latitude,country,postalCode,countyDistrict,address3,address4,address5,address6,address7)))"}getUrl(){return this.windowRef.openmrsRestBase+"patient"}searchPatient(e,t=!1,r=null){const n=this.getUrl(),i=(new b.d).set("q",e).set("includeDead","true").set("v",r&&r.length>0?r:this.v);return this.http.get(n,{params:i}).pipe(Object(m.a)(e=>e.results))}getPatientByUuid(e,t=!1,r=null){let n=this.getUrl();n+="/"+e;const i=(new b.d).set("v",r&&r.length>0?r:this.v);return this.http.get(n,{params:i})}saveUpdatePatientIdentifier(e,t,r){if(!r||!e)return null;const n=this.getUrl()+"/"+e+"/identifier/"+t,i=new b.c({"Content-Type":"application/json"});return this.http.post(n,JSON.stringify(r),{headers:i}).pipe(Object(m.a)(e=>e.patient))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](b.a),i["\u0275\u0275inject"](y))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),z=(()=>{class e{constructor(e,t){this.patientResourceService=e,this.encounterResource=t,this.currentlyLoadedPatient=new c.BehaviorSubject(null),this.currentlyLoadedPatientUuid=new c.BehaviorSubject(null),this.isBusy=new c.BehaviorSubject(!1)}setCurrentlyLoadedPatientByUuid(e){return null!==this.currentlyLoadedPatient.value?this.currentlyLoadedPatient.value.uuid!==e&&this.fetchPatientByUuid(e):this.fetchPatientByUuid(e),this.currentlyLoadedPatient}fetchPatientByUuid(e){return this.currentlyLoadedPatient.next(null),this.currentlyLoadedPatientUuid.next(null),this.isBusy.next(!0),Object(c.forkJoin)(this.patientResourceService.getPatientByUuid(e,!1),this.encounterResource.getEncountersByPatientUuid(e)).subscribe(t=>{const r=t[0];r.encounters=t[1],this.currentlyLoadedPatient.next(r),this.currentlyLoadedPatientUuid.next(e),this.isBusy.next(!1)},e=>{console.error(e),this.isBusy.next(!1)})}reloadCurrentPatient(){null!==this.currentlyLoadedPatient.value&&this.fetchPatientByUuid(this.currentlyLoadedPatient.value.uuid)}resetPatientService(){this.currentlyLoadedPatient=new c.BehaviorSubject(null),this.currentlyLoadedPatientUuid=new c.BehaviorSubject(null),this.isBusy=new c.BehaviorSubject(!1)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Q),i["\u0275\u0275inject"](E))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[S,f,x,R,B,D,E,z,Q,L],imports:[[d.b,b.b]]}),e})(),K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e,bootstrap:[G]}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[P,j,F,M,_,A],imports:[[n.a,w.c,T.q,a.a,Z]]}),e})();Object(i.enableProdMode)();const X=Object(s.b)({bootstrapFunction:e=>(u.next(e),n.c(Object(s.a)()).bootstrapModule(K)),template:"<my-app-root />",NgZone:i.NgZone,AnimationEngine:o.b}),ee=X.bootstrap,te=X.mount,re=X.unmount}}]);