{"version":3,"file":"519.js","mappings":"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","sources":["webpack://@openmrs/esm-patient-test-results-app/./src/overview/external-overview.component.scss?33a6","webpack://@openmrs/esm-patient-test-results-app/../../node_modules/@carbon/icons-react/es/arrow--right/16.js","webpack://@openmrs/esm-patient-test-results-app/./src/overview/external-overview.component.tsx","webpack://@openmrs/esm-patient-test-results-app/./src/overview/external-overview.component.scss"],"sourcesContent":["\n      import API from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/openmrs/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./external-overview.component.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/openmrs/node_modules/sass-loader/dist/cjs.js!./external-overview.component.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\n * Copyright IBM Corp. 2019, 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * Code generated by @carbon/icon-build-helpers. DO NOT EDIT.\n */\nimport { _ as _objectWithoutProperties, I as Icon, a as _extends } from '../Icon-9ecdf98c.js';\nimport React from 'react';\nimport '@carbon/icon-helpers';\nimport 'prop-types';\n\nvar _path;\n\nvar _excluded = [\"children\"];\nvar ArrowRight16 = /*#__PURE__*/React.forwardRef(function ArrowRight16(_ref, ref) {\n  var children = _ref.children,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(Icon, _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"currentColor\",\n    ref: ref\n  }, rest), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.3 3.7L13.1 7.5 1 7.5 1 8.5 13.1 8.5 9.3 12.3 10 13 15 8 10 3z\"\n  })), children);\n});\n\nexport { ArrowRight16 as default };\n","import React, { useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport styles from './external-overview.component.scss';\nimport { EmptyState, ExternalOverviewProps, PanelFilterProps } from '@openmrs/esm-patient-common-lib';\nimport { parseSingleEntry, OverviewPanelEntry } from './useOverviewData';\nimport usePatientResultsData from '../loadPatientTestData/usePatientResultsData';\nimport CommonOverview from './common-overview.component';\nimport { navigate } from '@openmrs/esm-framework';\nimport { Button, DataTableSkeleton } from 'carbon-components-react';\nimport ArrowRight16 from '@carbon/icons-react/es/arrow--right/16';\n\nconst resultsToShow = 3;\n\nfunction useFilteredOverviewData(patientUuid: string, filter: (filterProps: PanelFilterProps) => boolean = () => true) {\n  const { sortedObs, loaded, error } = usePatientResultsData(patientUuid);\n\n  const overviewData = useMemo(() => {\n    return Object.entries(sortedObs)\n      .flatMap(([panelName, { entries, type, uuid }]) => {\n        return entries.map((e) => [e, uuid, type, panelName] as PanelFilterProps);\n      })\n      .filter(filter)\n      .map(([entry, uuid, type, panelName]: PanelFilterProps): OverviewPanelEntry => {\n        return [\n          panelName,\n          type,\n          parseSingleEntry(entry, type, panelName),\n          new Date(entry.effectiveDateTime),\n          new Date(entry.issued),\n          uuid,\n        ];\n      })\n      .sort(([, , , date1], [, , , date2]) => date2.getTime() - date1.getTime());\n  }, [filter, sortedObs]);\n\n  return { overviewData, loaded, error };\n}\n\nconst ExternalOverview: React.FC<ExternalOverviewProps> = ({ patientUuid, filter }) => {\n  const { t } = useTranslation();\n  const { overviewData, loaded, error } = useFilteredOverviewData(patientUuid, filter);\n\n  const cardTitle = t('recentResults', 'Recent Results');\n  const handleSeeAll = useCallback(() => {\n    navigate({ to: `\\${openmrsSpaBase}/patient/${patientUuid}/chart/test-results` });\n  }, [patientUuid]);\n\n  return (\n    <RecentResultsGrid>\n      {loaded ? (\n        <>\n          {(() => {\n            if (overviewData.length) {\n              return (\n                <div className={styles.widgetCard}>\n                  <div className={styles.externalOverviewHeader}>\n                    <h4 className={`${styles.productiveHeading03} ${styles.text02}`}>{cardTitle}</h4>\n                    <Button\n                      kind=\"ghost\"\n                      renderIcon={ArrowRight16}\n                      iconDescription=\"See all results\"\n                      onClick={handleSeeAll}\n                    >\n                      {t('seeAllResults', 'See all results')}\n                    </Button>\n                  </div>\n                  <CommonOverview\n                    {...{\n                      patientUuid,\n                      overviewData: overviewData.slice(0, resultsToShow),\n                      insertSeparator: true,\n                      deactivateToolbar: true,\n                      isPatientSummaryDashboard: false,\n                      hideToolbar: true,\n                    }}\n                  />\n                  {overviewData.length > resultsToShow && (\n                    <Button onClick={handleSeeAll} kind=\"ghost\">\n                      {t('moreResultsAvailable', 'More results available')}\n                    </Button>\n                  )}\n                </div>\n              );\n            } else {\n              return <EmptyState headerTitle={cardTitle} displayText={t('recentTestResults', 'recent test results')} />;\n            }\n          })()}\n        </>\n      ) : (\n        <DataTableSkeleton columnCount={3} />\n      )}\n    </RecentResultsGrid>\n  );\n};\n\nexport default ExternalOverview;\n\nconst RecentResultsGrid = (props) => {\n  return <div {...props} className={styles['recent-results-grid']} />;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".-esm-patient-test-results__external-overview-component__recent-results-grid___zjTmB{display:grid;background-color:#fff}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/overview/external-overview.component.scss\"],\"names\":[],\"mappings\":\"AACA,qFACI,YAAA,CACA,qBAAA\",\"sourcesContent\":[\"\\n.recent-results-grid {\\n    display: grid;\\n    background-color: white;\\n  }\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"recent-results-grid\": \"-esm-patient-test-results__external-overview-component__recent-results-grid___zjTmB\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","_path","_excluded","ArrowRight16","_ref","ref","children","rest","_","I","width","height","viewBox","xmlns","fill","d","patientUuid","filter","t","useTranslation","overviewData","loaded","error","sortedObs","usePatientResultsData","useMemo","Object","entries","flatMap","panelName","type","uuid","map","e","entry","parseSingleEntry","Date","effectiveDateTime","issued","sort","date1","date2","getTime","useFilteredOverviewData","cardTitle","handleSeeAll","useCallback","navigate","to","RecentResultsGrid","length","className","styles","Button","kind","renderIcon","iconDescription","onClick","slice","insertSeparator","deactivateToolbar","isPatientSummaryDashboard","hideToolbar","EmptyState","headerTitle","displayText","DataTableSkeleton","columnCount","props","___CSS_LOADER_EXPORT___","push","module","id","locals"],"sourceRoot":""}