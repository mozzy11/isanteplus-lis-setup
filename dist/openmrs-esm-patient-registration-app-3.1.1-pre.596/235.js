(self.webpackChunk_openmrs_esm_patient_registration_app=self.webpackChunk_openmrs_esm_patient_registration_app||[]).push([[235],{8179:(e,t,n)=>{"use strict";n.d(t,{Kt:()=>s,QT:()=>c,e1:()=>u});var r,i,a,o=n(3066),u="@openmrs/esm-patient-registration-app",s="patient-registration",c=(r={},a="network-first",(i=o.omrsOfflineCachingStrategyHttpHeaderName)in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r)},8235:(e,t,n)=>{"use strict";n.r(t),n.d(t,{backendDependencies:()=>k,frontendDependencies:()=>O,importTranslation:()=>x,setupOpenMRS:()=>U});var r=n(5047),i=n.n(r),a=n(3066),o=n(8179),u=n(7117),s=n(5741);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,u,"next",e)}function u(e){p(a,r,i,o,u,"throw",e)}o(void 0)}))}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.savePatientFormOffline=function(t,n,r,u,s,c,p){return l(i().mark((function l(){var d;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return d={fhirPatient:e.mapPatientToFhirPatient(e.getPatientToCreate(n,r,u,[])),_patientRegistrationData:{isNewPatient:t,formValues:n,patientUuidMap:r,initialAddressFieldValues:u,capturePhotoProps:s,patientPhotoConceptUuid:c,currentLocation:p}},i.next=3,(0,a.queueSynchronizationItem)(o.Kt,d,{id:n.patientUuid,displayName:"Patient registration",patientUuid:d.fhirPatient.id,dependencies:[]});case 3:return i.abrupt("return",null);case 4:case"end":return i.stop()}}),l)})))()},e.savePatientFormOnline=function(t,n,r,a,o,s,c,p){return l(i().mark((function d(){var f,m,y;return i().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.savePatientIdentifiers(t,n.patientUuid,n.identifiers,c,p);case 2:return f=d.sent,m=e.getPatientToCreate(n,r,a,f),e.getDeletedNames(n.patientUuid,r).forEach(function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.uO)(t.nameUuid,t.personUuid,p);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d.next=7,(0,u.co)(p,m,t?void 0:n.patientUuid);case 7:if(!(y=d.sent).ok){d.next=14;break}return d.next=11,Promise.all(n.relationships.filter((function(e){return e.relationshipType})).filter((function(e){return!!e.action})).map((function(e){var t=e.relatedPersonUuid,n=e.relationshipType,r=e.uuid,i=e.action,a=h(n.split("/"),2),o=a[0],s=a[1],c=y.data.uuid,l="aIsToB"===s,d={personA:l?t:c,personB:l?c:t,relationshipType:o};switch(i){case"ADD":return(0,u.bL)(p,d);case"UPDATE":return(0,u.r6)(p,r,d);case"DELETE":return(0,u.kE)(p,r)}})));case 11:if(!s||!(null==o?void 0:o.imageData)){d.next=14;break}return d.next=14,(0,u.oV)(y.data.uuid,o.imageData,"/ws/rest/v1/obs",o.dateTime||(new Date).toISOString(),s,p);case 14:return d.abrupt("return",y.data.uuid);case 15:case"end":return d.stop()}}),d)})))()},e.savePatientIdentifiers=function(e,t,n,r,a){return l(i().mark((function o(){var s;return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=n.filter((function(e){return"DELETE"!==e.action&&"NONE"!==e.action})).map(function(){var n=l(i().mark((function n(o){var s,c,p,l,d,f,h,m,y;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=o.identifierTypeUuid,c=o.identifier,p=o.uuid,l=o.action,d=o.source,f=o.preferred,h=o.autoGeneration,!(c||d&&h)){n.next=25;break}if(h&&d){n.next=6;break}n.t0=c,n.next=11;break;case 6:return n.next=8,(0,u.fX)(o.source.uuid,a);case 8:return n.next=10,n.sent.data.identifier;case 10:n.t0=n.sent;case 11:if(m=n.t0,y={uuid:p,identifier:m,identifierType:s,location:r,preferred:f},e){n.next=22;break}if("ADD"!==l){n.next=19;break}return n.next=17,(0,u.eb)(t,y,a);case 17:n.next=22;break;case 19:if("UPDATE"!==l){n.next=22;break}return n.next=22,(0,u.nI)(t,p,y.identifier,a);case 22:return n.abrupt("return",y);case 25:throw new Error("No approach for generating a patient identifier could be found.");case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t&&n.filter((function(e){return"DELETE"===e.action})).forEach(function(){var e=l(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ZB)(t,n.uuid,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.abrupt("return",Promise.all(s));case 3:case"end":return o.stop()}}),o)})))()},e.getDeletedNames=function(e,t){return(null==t?void 0:t.additionalNameUuid)?[{nameUuid:t.additionalNameUuid,personUuid:e}]:[]},e.getPatientToCreate=function(t,n,r,i){var a,o,u,c=e.getPatientAddressField(t,r);return o=t.birthdate,a=(null!=(u=Date)&&"undefined"!=typeof Symbol&&u[Symbol.hasInstance]?u[Symbol.hasInstance](o):o instanceof u)?[t.birthdate.getFullYear(),t.birthdate.getMonth()+1,t.birthdate.getDate()].join("-"):t.birthdate,(0,s.Z)(r,c)&&(c={}),{uuid:t.patientUuid,person:f({uuid:t.patientUuid,names:e.getNames(t,n),gender:t.gender.charAt(0),birthdate:a,birthdateEstimated:t.birthdateEstimated,attributes:e.getPatientAttributes(t),addresses:[c]},e.getPatientDeathInfo(t)),identifiers:i}},e.getNames=function(e,t){var n=[{uuid:t.preferredNameUuid,preferred:!0,givenName:e.givenName,middleName:e.middleName,familyName:e.familyName}];return e.addNameInLocalLanguage&&n.push({uuid:t.additionalNameUuid,preferred:!1,givenName:e.additionalGivenName,middleName:e.additionalMiddleName,familyName:e.additionalFamilyName}),n},e.getPatientAttributes=function(e){var t=[];if(e.attributes){var n=!0,r=!1,i=void 0;try{for(var a,o=Object.entries(e.attributes)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=h(a.value,2),s=u[0],c=u[1];t.push({attributeType:s,value:c})}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return e.unidentifiedPatient&&t.push({attributeType:"8b56eac7-5c76-4b9c-8c6f-1deab8d3fc47",value:"true"}),t},e.getPatientAddressField=function(e,t){return Object.keys(t).reduce((function(t,n){return f({},t,d({},n,e[n]))}),{})},e.getPatientDeathInfo=function(e){var t=e.isDead,n=e.deathDate,r=e.deathCause;return{dead:t,deathDate:t?n:void 0,causeOfDeath:t?r:void 0}},e.mapPatientToFhirPatient=function(e){var t,n,r,i,a,o;return{id:e.uuid,gender:{M:"male",F:"female",O:"other",U:"unknown"}[null===(t=e.person)||void 0===t?void 0:t.gender],birthDate:null===(n=e.person)||void 0===n?void 0:n.birthdate,deceasedBoolean:e.person.dead,deceasedDateTime:e.person.deathDate,name:null===(r=e.person)||void 0===r||null===(i=r.names)||void 0===i?void 0:i.map((function(e){return{given:[e.givenName,e.middleName].filter(Boolean),family:e.familyName}})),address:null===(a=e.person)||void 0===a?void 0:a.addresses.map((function(e){return{city:e.cityVillage,country:e.country,postalCode:e.postalCode,state:e.stateProvince,use:"home"}})),telecom:null===(o=e.person.attributes)||void 0===o?void 0:o.filter((function(e){return"Telephone Number"===e.attributeType}))}},e}(),y=n(6279),v={sections:{_type:a.Type.Array,_default:["demographics","contact","relationships"],_description:"An array of strings which are the keys from 'sectionDefinitions'",_elements:{_type:a.Type.String}},sectionDefinitions:{_type:a.Type.Object,_elements:{name:{_type:a.Type.String,_default:"",_description:"The title to display at the top of the section."},fields:{_type:a.Type.Array,_default:[],_description:"The parts to include in the section. Can be any of the following built-in fields: ".concat(["name","gender","dob","address","id","death"].join(", "),". Can also be any of the keys from the fieldDefinitions object, which you can use to define custom fields."),_elements:{_type:a.Type.String}}},_default:{demographics:{name:"Basic Info",fields:["name","gender","dob","id","codedAttributes","textBasedAttributes"]},contact:{name:"Contact Details",fields:["address","phone & email"]},death:{name:"Death Info",fields:["death"]},relationships:{name:"Relationships"}}},fieldDefinitions:{_type:a.Type.Object,_elements:{label:{_type:a.Type.String,_description:"The label of the input"},uuid:{_type:a.Type.UUID,_description:"Person attributetype uuid used to save the attribute"},placeholder:{_type:a.Type.String,_default:"",_description:"Placeholder that will appear in the input."},validation:{required:{_type:a.Type.Boolean,_default:!1},matches:{_type:a.Type.String,_default:null,_description:"Optional RegEx for testing the validity of the input."}}},_default:{},_description:"Definitions for custom fields that can be used in sectionDefinitions. Can also be used to override built-in fields."},fieldConfigurations:{_type:a.Type.Object,_default:{name:{displayMiddleName:!0,unidentifiedPatient:!0,defaultUnknownGivenName:"UNKNOWN",defaultUnknownFamilyName:"UNKNOWN"}}},links:{submitButton:{_type:a.Type.String,_default:"${openmrsSpaBase}/patient/${patientUuid}/chart",_validators:[a.validators.isUrlWithTemplateParameters(["patientUuid"])]}},concepts:{patientPhotoUuid:{_type:a.Type.ConceptUuid,_default:"736e8771-e501-4615-bfa7-570c03f4bef5"}},codedPersonAttributes:{_type:a.Type.Array,_default:[],_elements:{_type:a.Type.Object,personAttributeUuid:{_type:a.Type.PersonAttributeTypeUuid,_description:"The uuid of the person attribute type used to save the attribute"},conceptUuid:{_type:a.Type.ConceptUuid,_description:"Uuid for the convenience set that defines the allowed values. Only used if the type is coded."}}},textBasedAttributes:{_type:a.Type.Array,_elements:{_type:a.Type.Object,personAttributeUuid:{_type:a.Type.PersonAttributeTypeUuid,_description:"The uuid of the person attribute type used to save the attribute"},validationRegex:{_type:a.Type.String,_description:"Regular expression to validate the user input."}},_default:[]},defaultPatientIdentifierTypes:{_type:a.Type.Array,_elements:{_type:a.Type.PatientIdentifierTypeUuid},_default:[]}};function b(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){b(a,r,i,o,u,"next",e)}function u(e){b(a,r,i,o,u,"throw",e)}o(void 0)}))}}function w(){return P.apply(this,arguments)}function P(){return(P=g(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,y.X1)(),(0,y.Te)(),(0,y.mt)(),(0,y.St)()]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return _.apply(this,arguments)}function _(){return(_=g(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.savePatientFormOnline(t._patientRegistrationData.isNewPatient,t._patientRegistrationData.formValues,t._patientRegistrationData.patientUuidMap,t._patientRegistrationData.initialAddressFieldValues,t._patientRegistrationData.capturePhotoProps,t._patientRegistrationData.patientPhotoConceptUuid,t._patientRegistrationData.currentLocation,n.abort);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(3979),k={"webservices.rest":"^2.24.0"},O={"@openmrs/esm-framework":"^3.2.1-pre.1127"},D={currentSession:y.X1,addressTemplate:y.Te,relationshipTypes:y.mt,identifierTypes:y.St};function U(){var e={featureName:"Patient Registration",moduleName:o.e1};return(0,a.defineConfigSchema)(o.e1,v),(0,a.registerBreadcrumbs)([{path:"".concat(window.spaBase,"/").concat(o.Kt),title:"Patient Registration",parent:"".concat(window.spaBase,"/home")}]),(0,a.setupOfflineSync)(o.Kt,[],T,{onBeginEditSyncItem:function(e){(0,a.navigate)({to:"${openmrsSpaBase}/patient/".concat(e.content.fhirPatient.id,"/edit")})}}),(0,a.subscribePrecacheStaticDependencies)(w),(0,a.registerOfflinePatientHandler)("esm-patient-registration-app",{displayName:"Patient registration",onOfflinePatientAdded:function(e){var t=e.patientUuid;return g(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.fetchCurrentPatient)(t,{headers:o.QT});case 2:case"end":return e.stop()}}),e)})))()}}),{pages:[{load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(30),n.e(401),n.e(941),n.e(924),n.e(479),n.e(165)]).then(n.bind(n,165))}),e),route:/^patient-registration/,online:{savePatientForm:m.savePatientFormOnline,isOffline:!1},offline:{savePatientForm:m.savePatientFormOffline,isOffline:!0},resources:D},{load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(30),n.e(401),n.e(941),n.e(924),n.e(479),n.e(165)]).then(n.bind(n,165))}),{featureName:"edit-patient-details-form",moduleName:o.e1}),route:/^patient\/([a-zA-Z0-9\-]+)\/edit/,online:{savePatientForm:m.savePatientFormOnline},offline:{savePatientForm:m.savePatientFormOffline},resources:D}],extensions:[{id:"add-patient-action",slot:"top-nav-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(30),n.e(401),n.e(479),n.e(346)]).then(n.bind(n,6346))}),e),online:!0,offline:!0},{id:"cancel-patient-edit-modal",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(30),n.e(924),n.e(479),n.e(735)]).then(n.bind(n,5735))}),e),online:!0,offline:!0},{id:"patient-photo-widget",slot:"patient-photo-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(295),n.e(994)]).then(n.bind(n,7994))}),e),online:!0,offline:!0},{id:"edit-patient-details-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(924),n.e(112)]).then(n.bind(n,2635))}),e),online:!0,offline:!0},{id:"delete-identifier-confirmation-modal",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(30),n.e(924),n.e(479),n.e(149)]).then(n.bind(n,8149))}),e),online:!0,offline:!0}]}}},6279:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>y,St:()=>_,Te:()=>g,X1:()=>v,mt:()=>P});var r=n(5047),i=n.n(r),a=n(9902),o=n.n(a),u=n(3662),s=n(2777),c=n(8407),p=n(3066),l=n(8179);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,u,"next",e)}function u(e){f(a,r,i,o,u,"throw",e)}o(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=o().createContext(null);function v(e){return b.apply(this,arguments)}function b(){return(b=h(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/session",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=h(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/systemsetting?q=layout.address.format&v=custom:(value)",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return T.apply(this,arguments)}function T(){return(T=h(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/relationshiptype?v=default",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return x.apply(this,arguments)}function x(){return(x=h(i().mark((function e(t){var n,r,a,o,s,c,p,l,d,f,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:n=e.sent,r=n.filter(Boolean),a=!0,o=!1,s=void 0,e.prev=5,c=r[Symbol.iterator]();case 7:if(a=(p=c.next()).done){e.next=20;break}return l=p.value,e.t0=m,e.next=12,Promise.all([D(l.uuid,t),S(t)]);case 12:e.t1=e.sent,d=(0,e.t0)(e.t1,2),f=d[0],h=d[1],l.identifierSources=f.data.results.map((function(e){var t=(0,u.Z)(h.data.results,{source:{uuid:e.uuid}});return e.autoGenerationOption=t,e}));case 17:a=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t2=e.catch(5),o=!0,s=e.t2;case 26:e.prev=26,e.prev=27,a||null==c.return||c.return();case 29:if(e.prev=29,!o){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,null,[[5,22,26,34],[27,,29,33]])})))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=h(i().mark((function e(t){var n,r,a,o,u,s,c,p,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/patientidentifiertype?v=full",t);case 2:return n=e.sent,e.next=5,A("/ws/rest/v1/metadatamapping/termmapping?v=full&code=emr.primaryIdentifierType",t);case 5:if(r=e.sent,!n.ok){e.next=13;break}return c=null==n||null===(a=n.data)||void 0===a?void 0:a.results,p=null==r||null===(o=r.data)||void 0===o||null===(u=o.results)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.metadataUuid,l=(null==r?void 0:r.ok)?[F(null==c?void 0:c.find((function(e){return e.uuid===p})),!0)]:[],c.forEach((function(e){e.uuid!==p&&l.push(F(e,!1))})),e.abrupt("return",l);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return U.apply(this,arguments)}function U(){return(U=h(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/idgen/identifiersource?v=default&identifierType=".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=h(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("/ws/rest/v1/idgen/autogenerationoption?v=full",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return E.apply(this,arguments)}function E(){return(E=h(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:(0,c.Z)(t)});case 2:return e.next=4,(0,p.openmrsFetch)(t,{headers:l.QT,signal:null==n?void 0:n.signal});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return{name:e.display,fieldName:(0,s.Z)(e.display),required:e.required,uuid:e.uuid,format:e.format,isPrimary:t,uniquenessBehavior:e.uniquenessBehavior}}},7117:(e,t,n)=>{"use strict";n.d(t,{M8:()=>g,Uu:()=>b,ZB:()=>k,bL:()=>f,co:()=>p,eb:()=>P,fX:()=>l,kE:()=>m,nI:()=>_,oV:()=>y,r6:()=>h,uO:()=>d});var r=n(5047),i=n.n(r),a=n(9857),o=n(3066);function u(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);var a=new Blob([r],{type:n});return new File([a],"patient-photo.png")}function p(e,t,n){return(0,o.openmrsFetch)("/ws/rest/v1/patient/".concat(n||""),{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}function l(e,t){return(0,o.openmrsFetch)("/ws/rest/v1/idgen/identifiersource/".concat(e,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:{},signal:t.signal})}function d(e,t,n){return(0,o.openmrsFetch)("/ws/rest/v1/person/".concat(t,"/name/").concat(e),{method:"DELETE",signal:n.signal})}function f(e,t){return(0,o.openmrsFetch)("/ws/rest/v1/relationship",{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}function h(e,t,n){return(0,o.openmrsFetch)("/ws/rest/v1/relationship/".concat(t),{headers:{"Content-Type":"application/json"},method:"POST",body:{relationshipType:n.relationshipType},signal:e.signal})}function m(e,t){return(0,o.openmrsFetch)("/ws/rest/v1/relationship/".concat(t),{headers:{"Content-Type":"application/json"},method:"DELETE",signal:e.signal})}function y(e,t,n,r,i,a){return v.apply(this,arguments)}function v(){return(v=s(i().mark((function e(t,n,r,a,u,s){var p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(p=new FormData).append("patient",t),p.append("file",c(n)),p.append("json",JSON.stringify({person:t,concept:u,groupMembers:[],obsDatetime:a})),e.abrupt("return",(0,o.openmrsFetch)(r,{method:"POST",signal:s.signal,body:p}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t,n,r,i=(0,o.useConfig)().concepts.patientPhotoUuid,u="/ws/rest/v1/obs?patient=".concat(e,"&concept=").concat(i,"&v=full"),s=(0,a.ZP)(e?u:null,o.openmrsFetch),c=s.data,p=s.error,l=null==c||null===(t=c.data)||void 0===t?void 0:t.results[0];return{data:l?{dateTime:null==l?void 0:l.obsDatetime,imageSrc:null==l||null===(n=l.value)||void 0===n||null===(r=n.links)||void 0===r?void 0:r.uri}:null,isError:p,isLoading:!c&&!p}}function g(e,t){return w.apply(this,arguments)}function w(){return(w=s(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.openmrsFetch)("/ws/rest/v1/person?q=".concat(t),{signal:n.signal}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return T.apply(this,arguments)}function T(){return(T=s(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.openmrsFetch)("/ws/rest/v1/patient/".concat(t,"/identifier/"),{method:"POST",headers:{"Content-Type":"application/json"},signal:r.signal,body:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=s(i().mark((function e(t,n,r,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.openmrsFetch)("/ws/rest/v1/patient/".concat(t,"/identifier/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},signal:a.signal,body:{identifier:r}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return O.apply(this,arguments)}function O(){return(O=s(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.openmrsFetch)("/ws/rest/v1/patient/".concat(t,"/identifier/").concat(n,"?purge"),{method:"DELETE",headers:{"Content-Type":"application/json"},signal:r.signal}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3979:(e,t,n)=>{var r={"./en.json":[3574,574]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=3979,e.exports=i}}]);
//# sourceMappingURL=235.js.map