"use strict";(self.webpackChunk_openmrs_esm_patient_programs_app=self.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[313],{7313:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(9902),l=a.n(r),n=a(8011),o=a(6007),s=a(9035),i=a(8580),d=a(1145),m=a(7030),c=a(160),p=a(6266),u=a(451),g=a(364),h=a(7500),E=a(8345),Z=a(1358),b=a(2427),y=a(3783),k=a(3863),P=a(8827),f=a(819),C=a(3771),w=a(4924),v=a(5873);function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_.apply(this,arguments)}const S=e=>{let{patientUuid:t,basePath:a}=e;const{t:r}=(0,w.useTranslation)(),S=r("programs","Program enrollments"),T=r("carePrograms","Care Programs"),D=r("seeAll","See all"),A=window.spaBase+a+"/programs",{data:O,isError:I,isLoading:N,isValidating:$}=(0,v.Bw)(t),H=O?.filter((e=>!e.dateCompleted)),{data:L}=(0,v.oI)(),j=(0,k.Z)(L,(e=>!(0,P.Z)((0,f.Z)(O,"program.uuid"),e.uuid))),{results:x,goTo:z,currentPage:B}=(0,s.usePagination)(O??[],5),U=l().useCallback((()=>(0,C.launchPatientWorkspace)("programs-form-workspace")),[]),W=[{key:"display",header:r("activePrograms","Active programs")},{key:"location",header:r("location","Location")},{key:"dateEnrolled",header:r("dateEnrolled","Date enrolled")},{key:"status",header:r("status","Status")}],F=l().useMemo((()=>x?.map((e=>({id:e.uuid,display:e.display,location:e.location?.display,dateEnrolled:(0,s.formatDatetime)(new Date(e.dateEnrolled)),status:e.dateCompleted?`${r("completedOn","Completed On")} ${(0,s.formatDate)(new Date(e.dateCompleted))}`:r("active","Active")})))),[x,r]);return N?l().createElement(i.Z,{role:"progressbar"}):I?l().createElement(C.ErrorState,{error:I,headerTitle:T}):H?.length?l().createElement("div",{className:o.Z.widgetCard},l().createElement(C.CardHeader,{title:T},l().createElement("span",null,$?l().createElement(d.Z,null):null),l().createElement(m.Z,{kind:"ghost",renderIcon:n.Z,iconDescription:"Add programs",onClick:U,disabled:L?.length&&0===j?.length},r("add","Add"))),l().createElement(c.Z,null,L?.length&&0===j?.length&&l().createElement(p.K0,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:r("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:r("fullyEnrolled","Enrolled in all programs")}),l().createElement(u.ZP,{rows:F,headers:W,isSortable:!0,size:"short"},(e=>{let{rows:t,headers:a,getHeaderProps:r,getTableProps:n}=e;return l().createElement(g.Z,_({},n(),{useZebraStyles:!0}),l().createElement(h.Z,null,l().createElement(E.Z,null,a.map((e=>l().createElement(Z.Z,_({className:`${o.Z.productiveHeading01} ${o.Z.text02}`},r({header:e,isSortable:e.isSortable})),e.header?.content??e.header))))),l().createElement(b.Z,null,t.map((e=>l().createElement(E.Z,{key:e.id},e.cells.map((e=>l().createElement(y.Z,{key:e.id},e.value?.content??e.value))))))))}))),l().createElement(C.PatientChartPagination,{currentItems:x.length,onPageNumberChange:e=>{let{page:t}=e;return z(t)},pageNumber:B,pageSize:5,pageUrl:A,totalItems:O.length,urlLabel:D})):l().createElement(C.EmptyState,{displayText:S,headerTitle:T,launchForm:U})}}}]);
//# sourceMappingURL=313.js.map